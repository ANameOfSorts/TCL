# Overworld

**Main Page:**

{% page-ref page="../../fluff/overworld.md" %}

## Cursed Terrain

### Electrified Environment Reaction

**By:** Greyhound\#7836  
**Added:** 06/25/2021  
[Disscussion](https://tickettool.xyz/direct?url=https://cdn.discordapp.com/attachments/854439111430635560/858186241102446602/transcript-cursed-terrain-electrified-environment-reaction.html)

**Theory:**  
Genshin's overworld works under a different set of reaction rules than the players, additionally supported by the entry [Overworld Entities Have Levels](../../evidence/fluff/overworld.md#overworld-entities-have-levels), one of those different rules of reactions is Electrified water, when applying electro to water, it does not produce electro-charged, instead it infuses the water with electro for a few seconds, which does not apply electro, does not spread, and is not affected by 4TF set bonus, this electrified water can damage both the player and enemies. Water additionally is seen as friend to both player and enemy, which questions the nature of this Electrified reaction even further.

**Evidence:**  
Electrified water evidence, including 4TF attempts, enemy taking damage, as well as water never being a trigger to any reaction, only aura, as it's friendly to both parties: [Video](https://www.youtube.com/watch?v=zuS2G0SUkHc)

**Significance:**  
There might be more reactions unknown to the player coded into the game's files for various reason, potentially to be used in the future or simply scrapped ideas that have not been remove

### Electrified Water Properties

**By:** RazorClaws\#4343  
**Added:** 06/27/2021  
[Discussion](https://tickettool.xyz/direct?url=https://cdn.discordapp.com/attachments/858433829143445615/858455416635392040/transcript-electrified-water-properties.html)  

**Finding:**  
The duration of the environmental elemental reaction Electrified Water has varying duration based on the gauge strength of electro applied. There are approximately 2 seconds between each tick. IA of electro lasts for 3 ticks, 2B lasts for 5 ticks, and 4C lasts for 10 ticks.  
The damage dealt by Electrified water is affected by Electro Resistance. For example, a character with 15% Electro Resistance will take 85% of the Electrified Water damage.  

**Evidence:**  
Video contains Fischl and Lisa getting 3 ticks after applying 1A electro with charge attacks. Razor hold E and Beidou E get 5 ticks, and Beidou Q initial proc gets 10 ticks. The video also shows damage being reduced according to electro resistance obtained by the Protective Canopy Elemental Resonance. Finally, there is also footage of the monolith taking 248 damage from Electrified Water. The nearby slime (10% electro res) takes 223 damage from the same tick. Each tick reduces the monolith's health by about 1%. The monolith on Floor 2 of the Spiral Abyss will take damage from Electrified Water. Using Electrified Water, the monolith is found to have 0% electro resistance and approximately 24,800 HP: [Video](https://www.youtube.com/watch?v=aevZ6FPmcl4)  

**Significance:**  
Learning more about how environmental reactions are programmed/calculated. Also, don't bring electro units if you're trying to get the achievement for Floor 2-2 of the Spiral Abyss.  

### Electro Crystal Range

**By:** Greyhound\#7836  
**Added:** 06/21/2021  
[Disscussion](https://tickettool.xyz/direct?url=https://cdn.discordapp.com/attachments/854441186256355348/856763759632449536/transcript-cursed-terrain-electro-crystal-range.html)

**Finding:** Electro crystals' pulse range works in a rectangle range, with the crystal being not centered, but rather between the center and the side

**Evidence:** [https://www.youtube.com/watch?v=f8QfbYvuR6Q](https://www.youtube.com/watch?v=f8QfbYvuR6Q)

**Significance:** electro crystals work in a similar way to cryo&pyro stamen flowers, for a better understanding of the overworld

### Invisible Water Layer

**By:** Greyhound\#7836  
**Added:** 06/23/2021  
[Discussion](https://tickettool.xyz/direct?url=https://cdn.discordapp.com/attachments/854436805537169488/857347792947380294/transcript-cursed-terrain-invisible-water-layer.html)

**Theory:**  
Genshin's water is coded in a way where the visual water and actual layer are separate, thus there is an invisible field of water that does not apply wet in random places of the world, but can be infused

**Evidence:**  
1. Invisible water being infused by Anemo MC: [Video](https://www.youtube.com/watch?v=oR1zJjhqASI)  
   Invisible water being infused by Sucrose: [Video](https://www.youtube.com/watch?v=kAXeOFUDlic) credits to @ishnu  
2. Invisible water infused by electro: [Video](https://www.youtube.com/watch?v=7tpGWZ4hnfo)
3. Water hitbox & reactions from UNDER the water, UNDER the ocean: [Video](https://www.youtube.com/watch?v=sWmhqgGfLaM)

**Significance:**  
Understanding the cursed overworld of Teyvat

### Overworld Entities Have Levels

**By:** Greyhound\#7836, mol\#3280, deaf#0246  
**Added:** 06/23/2021  
**Updated:** 07/08/2021  
[Discussion](https://tickettool.xyz/direct?url=https://cdn.discordapp.com/attachments/851603340403933194/857345614483554334/transcript-cursed-terrain-world-levels.html)  
[Discussion](https://tickettool.xyz/direct?url=https://cdn.discordapp.com/attachments/873033114723696660/873532969355210752/transcript-overworld-entity-levels-revisited.html)

**Finding:**  
Overworld has levels for every "body", including water and grass and sand, trees, rocks, and other things that we can't prove in any other way other than the game's code which shows this, thus varying stats which is proven by their damage.

**Evidence:**  
Flower stamens deal damage based on a static, pre-determined level assigned to them. While levels for grass are dynamic and change under currently unknown circumstances: [Video](https://www.youtube.com/watch?v=7NlTEDO2oFk)  
Water (using electrified): [Video](https://www.youtube.com/watch?v=oSepgh_2M_M)  

**Signifiance:**  
Almost cracking the code for overworld. Now getting a bit closer.

### Genshin has 2D Water

**By:** mol\#3280, Greyhound\#7836, IshnuKal\#3728  
**Added:** 6/23/2021  
[Discussion](https://tickettool.xyz/direct?url=https://cdn.discordapp.com/attachments/851944273712644116/857341175685054504/transcript-genshin-has-2d-water.html)

**Finding:**  
Genshin's water exists only in horizontal, 2 dimensional sheets. Additionally, true water is not graphically represented at all times, while graphically represented water is only an approximation.

**Evidence:**  
[Album](https://imgur.com/a/j0b5Y5a)  
1 shows Jean standing in waterfall without getting wet.  
2 shows venti climbing into waterfall below the 2d plane of "true water" without getting wet, but getting wet when he climbs into it at a slightly higher angle. When Venti then falls through the waterfall, he remains dry the entire time before impacting the second 2D plane of water.  
Greyhound's videos demonstrate that such planes appear to have water properties from below (Clip 3), and that its edges in some cases look to be perfectly square (Clip  4). Razor illustrates the trouble with this in Clip 5 by electrocharging the "true water" hidden below a dry floor and hurting himself with the resulting electrocharge AoE.

**Significance:**  
Electro is awful for the overworld because you can electrocharge water which resides in a flat sheet invisibly below the ground with AoE attacks. By doing this, you take continuous damage while standing on a dry surface. Also, you can stand in waterfalls without getting wet.

### Environment Reactions Base

**By:** Greyhound#7836  
**Added:** 6/23/2021  
[Discussion](https://tickettool.xyz/direct?url=https://cdn.discordapp.com/attachments/852322096528228372/857338163654557716/transcript-environment-reaction-base.html)

**Theory:**  
Environment uses a different set of reaction bases than players, thanks to the EM buffs and my prior testing of electro crystal levels, we can conclude that although the value at release was the same as for the player, now it's different, with the player having a new one, and the electro crystals using the old, unchanged base.

**Evidence:**  
The video shows a level 84 electro-charged tick of the pre 1.6 base (1243)  
[Video](https://www.youtube.com/watch?v=ClyLEKYV6uI)  

**Significance:**  
We're getting ever so closer to figuring out the cursed world of teyvat's code

## 4-piece set bonuses on environment reactions

**By:** Aluminum#5462  
**Added:** 6/22/2021  
[Discussion](https://tickettool.xyz/direct?url=https://cdn.discordapp.com/attachments/845422859467489390/856750287548710912/transcript-4tf-environmental-damage.html)

**Bug:** Sometimes set bonuses do not work properly if triggered on unconventional sources

**Evidence:** [https://youtube.com/playlist?list=PLPByPR2TubV4zjXSKhIhhWEww2Oo7Tmwh](https://youtube.com/playlist?list=PLPByPR2TubV4zjXSKhIhhWEww2Oo7Tmwh)

**Significance:** This explains some strange damage numbers when fighting enemies in the overworld

## Location remembered between map tabs  

**By:** Creonalia\#2818  
**Added:** 06/29/2021  
[Discussion](https://tickettool.xyz/direct?url=https://cdn.discordapp.com/attachments/803833656182702099/859538316431720478/transcript-location-remembered-between-map-tabs.html)  

**Theory:** Genshin remembers your location and world state(such as bosses) in different map tabs separately.  

**Evidence:** Anemo hypostasis and other world bosses normally respawn after 3 minutes and teleporting away&back (as shown at the end), but doesn't respawn after going to the Archipelago, additionally teapot shows that it remembers your ogriginal location in Teyvat upon leaving: [Video](https://youtu.be/oeCJF5fXqqMkqm)  

**Significance:** It'll be relevant whenever more overworld mechanics are added which refresh when tping in/out or if we get more map tabs.  

## Coordinates translation methods  

**By:** Mcpie#8672  
**Added:** 07/21/2021  
[Discussion](https://tickettool.xyz/direct?url=https://cdn.discordapp.com/attachments/865345502047764490/867159298671640616/transcript-coordinates-translation-methods.html)  

**Theory:** Coordinates translation methods from in-game coordinates into official teyvat map and vice versa.  
[Official Teyvat Interactive Map](https://webstatic-sea.mihoyo.com/app/ys-map-sea/index.html)  

Translation snippet:  
If you open feedback url and paste the snippet below into the console, it will give you your current coordinates as you would see them on center parameter url in interactive map.  
```javascript
coords = JSON.parse(decodeURIComponent((new URLSearchParams(window.location.search)).get('ext'))).loc;
f1 = ((x, y, z) => [-x + 2329.9357585906982, -z - 749.9086303710938]);
f1(coords.x, coords.y, coords.z);
```

Here is the reversal snippet, which assumes that you're on the interactive map and you want to get the coordinates in game of your current visible center:  
```javascript
coords = String(window.location).split('&').find(e => e.match(/^center=(.*)$/)).split('=')[1].split(',').map(e => +e);
f2 = ((x, y) => [-x + 2329.9357585906982, 200, -y - 749.9086303710938]);
f2(...coords);
```

NOTE: (calculations were done in patch 1.6)

**Evidence:** Official map url (query parameters) contain two variables: `center` and `zoom`. `zoom` does not matter at all in calculations because the translation function applies a vector, therefore there is no scaling and everything is 1-1 with a manipulated OX and OY axises directions.  

**IMPORTANT:**  
The format from `center`, which is `center=x,y` is reversed in the database, so if you were to look into requests and something seems off - that's because each coordinate is stored in the system with attributes `x_pos` and `y_pos`. If we had to translate it directly into the url, it would be `center=${y_pos},${x_pos}`.  
From now on, I am assuming a format `center=x,y` is a correct one, because it's easier to manipulate for common folks.  

Method used to get translation vector:  
1. Find `(0,0)` in game - use feedback url and go north/east/west/south and compare it against previous coordinates.  
2. Once `(0,0)` is found, create a new pin here.  
3. Go to Official Teyvat Map and synchronize your in-game pins. You might need to wait few minutes/hours before it's properly synced - try refreshing the page.  
4. While still on the page, open the console and start tracking network requests. You're looking for `https://api-os-takumi.mihoyo.com/common/map_user/ys_obc/v1/map/spot/get_map_spots_by_kinds`  
5. Toggle visible pins from the same category as the one you placed in game. Request should respond with a list of pins. Each pin has x_pos and y_pos attribute.  
Example pin: `{ x_pos: 585.788330078125, y_pos: -362.876220703125 }`  
However, as stated above - this is reversed in center parameter in the url for unknown to me reason. Keep that in mind.  
6. If you managed to find the pin you created, it should have values `{ x_pos: 749.9086303710938), y_pos: 2329.9357585906982 }` - this represents the translation vector.  

**Images:**  
Map center pin: [https://i.imgur.com/D43fqoJ.jpg](https://i.imgur.com/D43fqoJ.jpg)  
Screenshot from this pin: [https://i.imgur.com/ym4TOvB.png](https://i.imgur.com/ym4TOvB.png)

Method used to figure out directions:  
1. Note coordinates  
2. Go strictly east and note coordinates again. Only one of them should change.  
3. Go strictly north this time and note coordinates again. Only one of them should change compared to the ones from step 2.  
4. Perform the same action but for interactive map. Now play around with coordinates and decide whether you need to multiply scalar by (-1) or not in translation function.  
5. In our case, in-game -> interactive map requires (-1) on both scalars.  
Image representing coordinate axises (assumes `center=x,y` format):  
[https://i.imgur.com/rEy06Mq.png](https://i.imgur.com/rEy06Mq.png)

Method used to get in-game -> interactive map scale:  
1. Place 2 pins rather far away from each other (in order to reduce the error).  
2. Go to first pin -> feedback url and extract the coordinates.  
3. Repeat for second pin.  
4. Now do the same, but by extracting direct coordinates from network tracking on interactive map.  
The differences on respective axises should be the same. Remember that coordinates from the database are reversed.  
Now that we figured out the translation vector, scale and direction of target, we can create a translation from in-game coordinate system to interactive map coordinates system.  

If you open feedback url and paste this snippet into the console, it will give you your current coordinates as you would see them on center parameter in interactive map.  
```javascript
coords = JSON.parse(decodeURIComponent((new URLSearchParams(window.location.search)).get('ext'))).loc;
f1 = ((x, y, z) => [-x + 2329.9357585906982, -z - 749.9086303710938]);
f1(coords.x, coords.y, coords.z);
```

Since `1: R^3 -> R^2` then one variable (altitude) is completely lost, hence the reversal is impossible with altitude variable restored.

Here is the reversal snippet, which assumes that you're on the interactive map and you want to get the coordinates in game of your current visible center:  
```javascript
coords = String(window.location).split('&').find(e => e.match(/^center=(.*)$/)).split('=')[1].split(',').map(e => +e);
f2 = ((x, y) => [-x + 2329.9357585906982, 200, -y - 749.9086303710938]);
f2(...coords);
```

As a confirmation, you can run this snippet on any coordinate you would like.  
```javascript
coords = [100, 200, 300]
f1 = ((x, y, z) => [-x + 2329.9357585906982, -z - 749.9086303710938]);
f2 = ((x, y) => [-x + 2329.9357585906982, 200, -y - 749.9086303710938]);
result = f2(...f1(...coords))
```

due to IEEE 754, the result will be off at epsilon level.

**Significance:** Easier navigation at finding in-game and official teyvat map coordinates.

## Burning damage scaling  

**By:** ceeeleste#3568  
**Added:** 08/09/2021  
[Discussion](https://tickettool.xyz/direct?url=https://cdn.discordapp.com/attachments/869136453517574195/874164618136797184/transcript-burning-scales-off-of-active-char-em.html)  

**Theory:**  
- Burning DMG scales with the affected target's EM and Level.  
It's also not affected by HP or DEF.

- Burning DMG does not snapshot EM

- Both Burning and WL dmg are reduced by Pyro RES

**Evidence:**  
Abyss floor 10 WL tick dmg - 236  
[Imgur](https://imgur.com/TVtnOvw)

Burning does not snapshot EM  
[Imgur](https://imgur.com/mOSWwij)

**Significance:**  
Just don't get burnt.
